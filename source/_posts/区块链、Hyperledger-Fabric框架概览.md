---
title: 区块链、Hyperledger-Fabric框架概览
date: 2018-02-11 17:32:58
tags:
---
博客地址：http://blog.stayzeal.cn

什么是区块链？
------------------------------------
它包含如下三部分：
- **分布式账本（A Distributed Ledger）**
分布式账本是区块链网络的核心，记录了这个区块链网络中的所有交易。它是去中心化的，因为区块链网络中的所有参与者都会有一个备份，参与者之间相互协作，共同管理这个账本。去中心化和协作性在真实世界中的商品交易和商业活动中也有很强烈的体现。
为了保持去中心化和协作性，区块链中记录的信息只能是以追加的形式添加，通过加密手段保证被记录的交易信息不被篡改。这种不变性让确认信息来源是否可靠变得轻松简单，参与者可以确保交易信息不被篡改，所以区块链有时候被描述为**证明系统**
- **智能合约（Smart Contracts）**
为了信息能通过更新保持一致性，并且保证账本的完整功能（交易、查询等），区块链通过智能合约来控制操作账本的权限。
![image.png](http://upload-images.jianshu.io/upload_images/800897-66169c9bf3452a79.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

智能合约不仅是封装信息，并保证信息在网络上快捷传输的一种关键机制，并且被设计成允许参与者自动执行某些交易过程。
例如：智能合约就可以被设计出货物运送成本随到达时间而变化的规则，再加上其他的参与者都同意的条款，就被加入到到了账本中。货款会在收到货物后自动到账。
-  **共识（Consensus）**
账本中的交易通过网络同步到所有账本的过程称为共识，同步账本的过程中，只有被相关参与者证明是真是的交易才会被添加进账本，当账本被更新是其他的账本也会根据交易顺序，把这些交易添加进去。
总结：
以上可以概括区块链为：它是一个共享的，复制所有交易的交易系统，通过智能合约来更新，并通过共识保持一致（通过过一个协作的过程来实现一致性同步）。
（以上来自官网，而我进行了蹩脚的翻译，英文水平有限）

以下是我的理解（如有误导，欢迎指正）：
- 说到分布式账本就让我想到了git仓库，每个人都已一个完整的仓库备份，并且这个仓库中的文件，只能增加而不能删除。
- 智能合约就是对git仓库总的文件进行修改，git仓库中我们可以随意修改，但是区块链需要一定的规则
- 共识就是每个人之间为了保持仓库的一致性，需要进行同步，然而不是你修改了就能同步到所有人的仓库中的，比如你必须遵循智能合约的规则。
---
区块链有什么用？
------------------------------------------------------
谁知道呢？!（其实是我懒得翻译，平常被我们熟知的有比特币，以太币等各种虚拟货币，还有区块链养宠物，但是好像并没什么卵用）

区块链框架是干什么的？
-------------------------------
区块链包含的是区块，但是对这些区块进行操作（增加交易等）的系统称为Application。表示一个区块的代码可能非常简单，但是对区块进行操作可能就很复杂。

Hyperledger-Fabric是什么鬼？
------------------------
（随便翻译自官网）
Hyperledger-Fabric是区块链的一种实现，其他的区块链可能是公有的，因为区块链被吹捧最多的就是去中心化，但是Hyperledger-Fabric是私有链，拥有权限管理。它通过Membership Service Provider (MSP)进行用户注册和管理。
它还提供别一些别的可选项：账本数据可以保存成不同的形式，共识机制也可以切换，支持多种会员管理服务（MSP）
提供渠道（Channel）功能，允许参与者创建单独的交易分类账本。Channels在如下的情况下回特别有用：当一个区块链的多个参与者直接存在竞争关系，他们可能会为不同的人提供的商品的价格不同；统一渠道中的不同参与这的账本回相同，而别的渠道中的参与者则不同。

**共享账本（Shared Ledger）**
Hyperledger Fabric账本系统包含两部分，每一个参与者都有这两部分的副本：
- **world state** ：描述账本在某一时间点的状态，它就是账本的数据库，
- **transaction log**：记录当前世界状态（world state）的所有交易记录，它是世界状态的历史。
账本的world state的保存方式是可以更改的，默认是以key-value的形式存储，而transaction log是没必要可插拔的，它仅仅是记录了账本数据库被区块链网络使用之后的历史值。

**智能合约Smart Contracts**
Hyperledger Fabric 的智能合约被写入在chaincode。当区块链外部应用需要和账本进行交互的时候，外部应用才会调用这个智能合约。在多数情况下，chaincode 只会和账本的数据库还有world state交互，和transaction log没有交互。
chaincode可以通过多种语言实现，现在又Go和Node，将来还会支持Java等。
**隐私Privacy**
在Business-to-Business (B2B)网络中，参与者对他们分享了多少数据，会比较关心，但是在一些别的网络中隐私不一定是最重要的。
**共识Consensus**
交易必须按照发生的顺序记录到账本中，即使这笔交易发生在不同的参与群体之间。所以交易应该是按顺序被建立，一旦出现错误的交易被应该有方法拒绝这笔交易的提交。
如何识别错误的交易在计算机研究领域被广泛研究，并且根据权衡有不同的实现方法。比如：PBFT (Practical Byzantine Fault Tolerance)-实际的拜占庭容错（我也不知道它是怎么回事，但是它和比特币的工作量证明机制是不同的）Hyperledger-Fabric运行网络的创建者根据需要选择不同的共识机制。

**总结：**
区块链三个关键词
- 分布式账本
- 智能合约
- 共识

区块链框架的组成：
- 区块代码
- 对区块链进行操作的代码

Hyperledger-Fabric区块链框架：
- 区块代码：chaincode
- 对区块链操作的代码：称为Application
- 私有的
- 支持会员管理（MSP）
- 支持渠道（Channel）
- Go，Node.js（暂未支持的Java的语言）

**接下来：[区块链、Hyperledger-Fabric框架Win10环境搭建](http://blog.stayzeal.cn/2018/02/11/%E5%8C%BA%E5%9D%97%E9%93%BE%E3%80%81Hyperledger-Fabric%E6%A1%86%E6%9E%B6Win10%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/)**